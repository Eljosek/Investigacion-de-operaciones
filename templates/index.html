{% extends "base.html" %}

{% block title %}Inicio - Programación Lineal{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section text-center py-5 mb-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <h1 class="display-3 fw-bold mb-3 text-gradient">
                    Optimización con Programación Lineal
                </h1>
                <p class="lead text-muted mb-4" style="font-size: 1.25rem;">
                    Herramienta educativa interactiva con visualización paso a paso de cinco métodos de optimización matemática
                </p>
                <div class="d-flex justify-content-center gap-3 mb-4 flex-wrap">
                    <span class="badge bg-primary px-3 py-2" style="font-size: 0.95rem;">
                        <i class="fas fa-chart-area"></i> Método Gráfico
                    </span>
                    <span class="badge bg-success px-3 py-2" style="font-size: 0.95rem;">
                        <i class="fas fa-table"></i> Método Simplex
                    </span>
                         <span class="badge px-3 py-2" style="font-size: 0.95rem; background: #9333ea;">
                        <i class="fas fa-exchange-alt"></i> Dual Simplex
                    </span>
                    <span class="badge px-3 py-2" style="font-size: 0.95rem; background: #f97316;">
                        <i class="fas fa-layer-group"></i> Dos Fases
                    </span>
                    <span class="badge px-3 py-2" style="font-size: 0.95rem; background: #dc2626;">
                        <i class="fas fa-truck-moving"></i> Transporte
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Selector de Métodos -->
<div class="container mb-5">
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <h2 class="text-center mb-4 fw-bold">
                <i class="fas fa-compass"></i> Selecciona tu Método de Resolución
            </h2>
            <p class="text-center text-muted mb-5">
                Elige el algoritmo más adecuado según las características de tu problema
            </p>
            
            <div class="row g-4">
                <!-- Card Método Gráfico -->
                <div class="col-md-4">
                    <div class="card method-grafico h-100 border-0 shadow-lg">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <i class="fas fa-chart-area fa-4x text-method-grafico"></i>
                            </div>
                            <h4 class="card-title fw-bold mb-3">Método Gráfico</h4>
                            <p class="card-text text-muted mb-3">
                                Visualización intuitiva para problemas con <strong>2 variables</strong>
                            </p>
                            <ul class="list-unstyled text-start small mb-4">
                                <li class="mb-2"><i class="fas fa-check text-primary me-2"></i>Gráfica interactiva</li>
                                <li class="mb-2"><i class="fas fa-check text-primary me-2"></i>Región factible visual</li>
                                <li class="mb-2"><i class="fas fa-check text-primary me-2"></i>Ideal para aprendizaje</li>
                            </ul>
                            <button type="button" class="btn btn-primary btn-lg w-100" onclick="showGraphicMethod()">
                                <i class="fas fa-play"></i> Comenzar
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Card Método Simplex -->
                <div class="col-md-4">
                    <div class="card method-simplex h-100 border-0 shadow-lg">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <i class="fas fa-table fa-4x text-method-simplex"></i>
                            </div>
                            <h4 class="card-title fw-bold mb-3">Método Simplex</h4>
                            <p class="card-text text-muted mb-3">
                                Algoritmo robusto para problemas con <strong>n variables</strong>
                            </p>
                            <ul class="list-unstyled text-start small mb-4">
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Tableau paso a paso</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Pivotes identificados</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Escalable y eficiente</li>
                            </ul>
                            <a href="{{ url_for('simplex') }}" class="btn btn-success btn-lg w-100">
                                <i class="fas fa-play"></i> Comenzar
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Card Método Dual Simplex -->
                <div class="col-md-4">
                    <div class="card method-dual h-100 border-0 shadow-lg">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <i class="fas fa-exchange-alt fa-4x text-method-dual"></i>
                            </div>
                            <h4 class="card-title fw-bold mb-3">Dual Simplex</h4>
                            <p class="card-text text-muted mb-3">
                                Método dual para <strong>análisis y sensibilidad</strong>
                            </p>
                            <ul class="list-unstyled text-start small mb-4">
                                <li class="mb-2"><i class="fas fa-check text-info me-2"></i>Ratios duales (zⱼ/aᵢⱼ)</li>
                                <li class="mb-2"><i class="fas fa-check text-info me-2"></i>RHS negativo marcado</li>
                                <li class="mb-2"><i class="fas fa-check text-info me-2"></i>Complementario al Simplex</li>
                            </ul>
                            <a href="{{ url_for('dual_simplex') }}" class="btn btn-info btn-lg w-100">
                                <i class="fas fa-play"></i> Comenzar
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Card Método Simplex Dos Fases -->
                <div class="col-md-4">
                    <div class="card method-two-phase h-100 border-0 shadow-lg">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <i class="fas fa-layer-group fa-4x text-method-two-phase"></i>
                            </div>
                            <h4 class="card-title fw-bold mb-3">Simplex Dos Fases</h4>
                            <p class="card-text text-muted mb-3">
                                Para restricciones <strong>mixtas (>=, =)</strong> con variables artificiales
                            </p>
                            <ul class="list-unstyled text-start small mb-4">
                                <li class="mb-2"><i class="fas fa-check me-2" style="color: #f97316;"></i>Fase I: Factibilidad (W=0)</li>
                                <li class="mb-2"><i class="fas fa-check me-2" style="color: #f97316;"></i>Fase II: Optimización</li>
                                <li class="mb-2"><i class="fas fa-check me-2" style="color: #f97316;"></i>Restricciones >=, = o mixtas</li>
                            </ul>
                            <a href="{{ url_for('two_phase_simplex_route') }}" class="btn btn-two-phase btn-lg w-100">
                                <i class="fas fa-play"></i> Comenzar
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Card Modelo de Transporte -->
                <div class="col-md-4">
                    <div class="card method-transport h-100 border-0 shadow-lg">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <i class="fas fa-truck-moving fa-4x text-method-transport"></i>
                            </div>
                            <h4 class="card-title fw-bold mb-3">Modelo de Transporte</h4>
                            <p class="card-text text-muted mb-3">
                                Optimiza distribución de <strong>orígenes a destinos</strong> minimizando costos
                            </p>
                            <ul class="list-unstyled text-start small mb-4">
                                <li class="mb-2"><i class="fas fa-check me-2" style="color: #dc2626;"></i>Esquina Noroeste</li>
                                <li class="mb-2"><i class="fas fa-check me-2" style="color: #dc2626;"></i>Costo Mínimo</li>
                                <li class="mb-2"><i class="fas fa-check me-2" style="color: #dc2626;"></i>Vogel (VAM)</li>
                            </ul>
                            <a href="{{ url_for('transportation_method') }}" class="btn btn-transport btn-lg w-100">
                                <i class="fas fa-play"></i> Comenzar
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Características de la Aplicación -->
<div class="bg-light py-5 mb-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <h2 class="text-center mb-5 fw-bold">
                    <i class="fas fa-star"></i> Características Principales
                </h2>
                <div class="row g-4">
                    <div class="col-md-4">
                        <div class="text-center">
                            <div class="mb-3">
                                <i class="fas fa-graduation-cap fa-3x text-primary"></i>
                            </div>
                            <h5 class="fw-bold mb-3">Enfoque Educativo</h5>
                            <p class="text-muted">
                                Visualización detallada de cada iteración del algoritmo con explicaciones paso a paso
                            </p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="text-center">
                            <div class="mb-3">
                                <i class="fas fa-code fa-3x text-success"></i>
                            </div>
                            <h5 class="fw-bold mb-3">Implementación Manual</h5>
                            <p class="text-muted">
                                Algoritmos programados desde cero con NumPy, no wrappers de bibliotecas
                            </p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="text-center">
                            <div class="mb-3">
                                <i class="fas fa-palette fa-3x text-info"></i>
                            </div>
                            <h5 class="fw-bold mb-3">Diseño Moderno</h5>
                            <p class="text-muted">
                                Interfaz intuitiva con colores distintivos por método y modo oscuro completo
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Formulario del Método Gráfico (inicialmente oculto) -->
<div id="graphicMethodForm" style="display: none;">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="text-center mb-4">
                    <h2 class="text-method-grafico fw-bold">
                        <i class="fas fa-chart-area"></i>
                        Método Gráfico
                    </h2>
                    <p class="text-muted">Resuelve problemas de programación lineal con dos variables</p>
                </div>

        <!-- Formulario principal -->
        <div class="card shadow-lg method-grafico">
            <div class="card-header text-white">
                <h3 class="card-title mb-0">
                    <i class="fas fa-edit"></i>
                    Ingresa tu problema de LP
                </h3>
            </div>
            
            <div class="card-body">
                <form action="{{ url_for('solve') }}" method="POST" id="lpForm">
                    <!-- Función objetivo -->
                    <div class="mb-4">
                        <label for="objective" class="form-label">
                            <i class="fas fa-bullseye"></i>
                            <strong>Función Objetivo</strong>
                        </label>
                        <input type="text" 
                               class="form-control form-control-lg" 
                               id="objective" 
                               name="objective" 
                               placeholder="Ejemplo: maximizar z = 3x + 2y"
                               required>
                        <div class="form-text">
                            <i class="fas fa-info-circle"></i>
                            Formatos válidos: "maximizar z = 3x + 2y" o "min z = x - 2y"
                        </div>
                    </div>

                    <!-- Restricciones -->
                    <div class="mb-4">
                        <label for="constraints" class="form-label">
                            <i class="fas fa-list"></i>
                            <strong>Restricciones</strong>
                        </label>
                        <textarea class="form-control" 
                                  id="constraints" 
                                  name="constraints" 
                                  rows="6" 
                                  placeholder="Ingresa una restricción por línea. Ejemplos:&#10;x + 2y <= 8&#10;2x + y <= 10&#10;x >= 0&#10;y >= 0"
                                  required></textarea>
                        <div class="form-text">
                            <i class="fas fa-info-circle"></i>
                            Operadores válidos: <code><=</code>, <code>>=</code>, <code>=</code> o <code>≤</code>, <code>≥</code>
                        </div>
                    </div>

                    <!-- Botones -->
                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-calculator"></i>
                            Resolver Problema
                        </button>
                        <div class="btn-group" role="group">
                            <button type="button" class="btn btn-outline-secondary" onclick="clearForm()">
                                <i class="fas fa-eraser"></i> Limpiar
                            </button>
                            <button type="button" class="btn btn-outline-info" onclick="loadExample()">
                                <i class="fas fa-lightbulb"></i> Cargar Ejemplo
                            </button>
                            <button type="button" class="btn btn-outline-warning" onclick="hideGraphicMethod()">
                                <i class="fas fa-arrow-left"></i> Cambiar Método
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Sección de ayuda -->
        <div class="row mt-5 g-4">
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-question-circle fa-3x text-primary"></i>
                        </div>
                        <h5 class="fw-bold mb-3">¿Cómo funciona?</h5>
                        <p class="text-muted small">
                            El método gráfico encuentra la solución óptima evaluando los vértices de la región factible en el plano cartesiano.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-book-open fa-3x text-warning"></i>
                        </div>
                        <h5 class="fw-bold mb-3">Ejemplos Resueltos</h5>
                        <p class="text-muted small mb-3">
                            Consulta ejemplos paso a paso para entender mejor la formulación de problemas de LP.
                        </p>
                        <a href="{{ url_for('examples') }}" class="btn btn-warning">
                            <i class="fas fa-arrow-right"></i> Ver Ejemplos
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="mb-3">
                            <i class="fas fa-graduation-cap fa-3x text-success"></i>
                        </div>
                        <h5 class="fw-bold mb-3">Documentación</h5>
                        <p class="text-muted small mb-3">
                            Aprende más sobre los 3 métodos de programación lineal implementados.
                        </p>
                        <a href="{{ url_for('about') }}" class="btn btn-success">
                            <i class="fas fa-arrow-right"></i> Leer Más
                        </a>
                    </div>
                </div>
            </div>
        </div>

            </div>
        </div>
    </div>
</div>

<!-- Call to Action Final -->
<div class="py-5 my-5" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center text-white">
                <h2 class="display-5 fw-bold mb-4">¿Necesitas ayuda con tu problema?</h2>
                <p class="lead mb-4">
                    Visita la sección de ejemplos o lee la documentación para entender mejor cada método
                </p>
                <div class="d-flex justify-content-center gap-3">
                    <a href="{{ url_for('examples') }}" class="btn btn-light btn-lg">
                        <i class="fas fa-book-open"></i> Ver Ejemplos
                    </a>
                    <a href="{{ url_for('about') }}" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-info-circle"></i> Acerca de
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Función para limpiar el formulario
function clearForm() {
    document.getElementById('lpForm').reset();
}

// Función para cargar un ejemplo
function loadExample() {
    document.getElementById('objective').value = 'maximizar z = x + y';
    document.getElementById('constraints').value = 'x + 3y <= 26\n4x + 3y <= 44\n2x + 3y <= 28\nx >= 0\ny >= 0';
}

// Función para mostrar el formulario del método gráfico
function showGraphicMethod() {
    // Ocultar la selección de métodos y características
    document.querySelector('.hero-section').style.display = 'none';
    document.querySelectorAll('.container.mb-5').forEach(el => el.style.display = 'none');
    document.querySelector('.bg-light.py-5').style.display = 'none';
    document.querySelector('.py-5.my-5').style.display = 'none';
    // Mostrar el formulario del método gráfico
    document.getElementById('graphicMethodForm').style.display = 'block';
    // Scroll to top
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Función para volver a la selección de métodos
function hideGraphicMethod() {
    // Mostrar la selección de métodos
    document.querySelector('.hero-section').style.display = 'block';
    document.querySelectorAll('.container.mb-5').forEach(el => el.style.display = 'block');
    document.querySelector('.bg-light.py-5').style.display = 'block';
    document.querySelector('.py-5.my-5').style.display = 'block';
    // Ocultar el formulario
    document.getElementById('graphicMethodForm').style.display = 'none';
    // Scroll to top
    window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>
{% endblock %}